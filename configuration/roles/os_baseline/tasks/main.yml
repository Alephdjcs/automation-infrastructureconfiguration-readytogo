---
- name: Update and upgrade system
  ansible.builtin.apt:
    update_cache: true
    upgrade: dist

- name: Set swappiness
  ansible.builtin.sysctl:
    name: vm.swappiness
    value: "{{ baseline_swappiness }}"
    sysctl_set: true
    state: present
    reload: true

- name: Install baseline packages
  ansible.builtin.apt:
    name: "{{ baseline_packages }}"
    state: present

- name: Verify swappiness value
  ansible.builtin.command: sysctl vm.swappiness
  register: swappiness_output
  changed_when: false

- name: Print swappiness verification
  ansible.builtin.debug:
    var: swappiness_output.stdout

- name: Verify git installation
  ansible.builtin.command: git --version
  register: git_version
  changed_when: false

- name: Print git version
  ansible.builtin.debug:
    var: git_version.stdout

