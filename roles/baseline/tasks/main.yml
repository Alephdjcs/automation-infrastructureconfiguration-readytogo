---
- name: Update and upgrade system
  ansible.builtin.apt:
    update_cache: yes
    upgrade: dist

- name: Set swappiness to 30
  ansible.builtin.sysctl:
    name: vm.swappiness
    value: '30'
    sysctl_set: yes
    state: present
    reload: yes

- name: Install base tools
  ansible.builtin.apt:
    name:
      - git
      - curl
      - wget
      - vim
      - nano
      - net-tools
      - htop
      - unzip
      - tree
    state: present

- name: Verify swappiness value
  ansible.builtin.command: sysctl vm.swappiness
  register: swappiness_output
  changed_when: false

- name: Print swappiness verification
  ansible.builtin.debug:
    var: swappiness_output.stdout

- name: Verify git installation
  ansible.builtin.command: git --version
  register: git_version
  changed_when: false

- name: Print git version
  ansible.builtin.debug:
    var: git_version.stdout

